<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ú‡•á‡§®‡§∞‡•á‡§ü‡§∞</title>
    <style>body{font-family:-apple-system,sans-serif;background-color:#f0f2f5;padding:20px} .container{max-width:800px;margin:auto;background:#fff;padding:30px;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,.1)} h1,h2,h3{text-align:center} input,textarea,button,select{width:100%;padding:12px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:16px;margin-bottom:10px} .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px} textarea{grid-column:1/-1} #links-output{margin-top:25px;background:#e9ecef;padding:20px;border-radius:8px;display:none} #links-output input{background:#fff;cursor:pointer;margin-top:5px}</style>
</head>
<body>
    <div class="container">
        <h1 id="client-name-header">üöÄ ‡§®‡§Ø‡§æ ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ú‡•á‡§®‡§∞‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</h1>
        <form id="product-form">
            <h3>‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h3><div class="form-grid"><input type="text" id="product-name" placeholder="‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§ï‡§æ ‡§®‡§æ‡§Æ" required><input type="text" id="review-text" placeholder="‡§∞‡§ø‡§µ‡•ç‡§Ø‡•Ç ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü" required><input type="number" id="current-price" placeholder="‡§Ö‡§≠‡•Ä ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§" required><input type="number" id="old-price" placeholder="‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§ï‡•Ä‡§Æ‡§§" required></div>
            <textarea id="image-urls" placeholder="‡§π‡§∞ ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§á‡§Æ‡•á‡§ú URL" rows="3" required></textarea><textarea id="features" placeholder="‡§π‡§∞ ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§´‡•Ä‡§ö‡§∞" rows="3" required></textarea>
            <h3>‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§î‡§∞ ‡§ë‡§´‡§∞‡•ç‡§∏</h3><div class="form-grid"><label>‡§≤‡§ø‡§Ç‡§ï Expiry Date: <input type="date" id="expiry-date"></label><label>‡§´‡•ç‡§∞‡•Ä ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ë‡§´‡§∞: <select id="free-delivery"><option value="true">On</option><option value="false">Off</option></select></label></div>
            <h3>‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä ‡§™‡•á‡§ú (Policies)</h3>
            <textarea id="privacy-policy" placeholder="Privacy Policy ‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç" rows="4"></textarea><textarea id="refund-policy" placeholder="Refund Policy ‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç" rows="4"></textarea>
            <textarea id="about-us" placeholder="About Us ‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç" rows="4"></textarea><textarea id="contact-us" placeholder="Contact Us ‡§ï‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç (‡§ú‡•à‡§∏‡•á - Email: abc@xyz.com)" rows="4"></textarea>
            <button type="submit" style="background:#007bff;color:#fff;border:none">‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§¨‡§®‡§æ‡§ì</button>
        </form>
        <div id="links-output"><h3>‚úÖ ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡§Ç!</h3><label><b>‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§≤‡§ø‡§Ç‡§ï:</b></label><input type="text" id="store-link" readonly onclick="this.select()"><br><br><label><b>‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡§ø‡§Ç‡§ï:</b></label><input type="text" id="admin-link" readonly onclick="this.select()"></div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
    <script>
        // ============== ‡§Ö‡§™‡§®‡•Ä Firebase Keys ‡§Ø‡§π‡§æ‡§Å ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç ==============
  const firebaseConfig = {
    apiKey: "AIzaSyCZAoe1zoWGZk7A1WLFxdR4T67ntvmFIfY",
    authDomain: "my-client-stores.firebaseapp.com",
    databaseURL: "https://my-client-stores-default-rtdb.firebaseio.com",
    projectId: "my-client-stores",
    storageBucket: "my-client-stores.firebasestorage.app",
    messagingSenderId: "658459339073",
    appId: "1:658459339073:web:37fa1b05e06c09c14119c0",
    measurementId: "G-N8MVEE3B19"
  };
        // ==============================================================

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const params = new URLSearchParams(window.location.search);
        const clientId = params.get('clientId');

        if (!clientId) {
            document.body.innerHTML = '<h1 style="text-align:center; padding: 50px;">‡§ó‡§≤‡§§ ‡§∞‡§æ‡§∏‡•ç‡§§‡§æ! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Å‡§™‡§∞-‡§è‡§°‡§Æ‡§ø‡§® ‡§™‡•à‡§®‡§≤ ‡§∏‡•á ‡§Ü‡§è‡§Ç‡•§</h1>';
        } else {
            database.ref('clients/' + clientId + '/name').once('value', s => {
                if (s.exists()) {
                    document.getElementById('client-name-header').innerText = `üöÄ ${s.val()} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§Ø‡§æ ‡§∏‡•ç‡§ü‡•ã‡§∞`;
                }
            });
        }

        document.getElementById('product-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 1. ‡§π‡§Æ ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§ï‡•á ‡§®‡§æ‡§Æ ‡§∏‡•á ‡§è‡§ï ‡§Ø‡•Ç‡§®‡§ø‡§ï ID ‡§¨‡§®‡§æ‡§è‡§Ç‡§ó‡•á
            const productName = document.getElementById('product-name').value;
            const productId = productName.toLowerCase().replace(/\s+/g, '-').slice(0, 20) + '-' + Date.now().toString().slice(-5);
            
            // 2. ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡•á ‡§∏‡§æ‡§∞‡§æ ‡§°‡•á‡§ü‡§æ ‡§á‡§ï‡§†‡•ç‡§†‡§æ ‡§ï‡§∞‡•á‡§Ç
            const productData = {
                name: productName,
                reviewText: document.getElementById('review-text').value,
                price: parseFloat(document.getElementById('current-price').value),
                oldPrice: parseFloat(document.getElementById('old-price').value),
                images: document.getElementById('image-urls').value.split('\n').filter(url => url.trim() !== ''),
                features: document.getElementById('features').value.split('\n').filter(f => f.trim() !== ''),
                expiryDate: document.getElementById('expiry-date').value,
                freeDelivery: document.getElementById('free-delivery').value === 'true',
                privacyPolicy: document.getElementById('privacy-policy').value,
                refundPolicy: document.getElementById('refund-policy').value,
                aboutUs: document.getElementById('about-us').value,
                contactUs: document.getElementById('contact-us').value,
                announcementText: document.getElementById('free-delivery').value === 'true' ? 'üöö ‡§Ü‡§ú ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§Æ‡•Å‡§´‡§º‡•ç‡§§!' : ''
            };
            
            // 3. Firebase ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
            database.ref(`products/${clientId}/${productId}`).set(productData).then(() => {
                alert('‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ!');
                
                // 4. ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§¨‡§®‡§æ‡§è‡§Ç
                const baseUrl = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);
                const storeUrl = `${baseUrl}store.html?clientId=${clientId}&productId=${productId}`;
                const adminUrl = `${baseUrl}client-admin.html?clientId=${clientId}&productId=${productId}`;

                // 5. ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§ï‡•ã ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
                document.getElementById('store-link').value = storeUrl;
                document.getElementById('admin-link').value = adminUrl;
                document.getElementById('links-output').style.display = 'block';

            }).catch(error => {
                console.error("Firebase Error:", error);
                alert('‡§ï‡•Å‡§õ ‡§ó‡§°‡§º‡§¨‡§°‡§º ‡§π‡•Å‡§à, ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§∏‡•á‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§æ‡•§');
            });
        });
    </script>
</body>
</html>