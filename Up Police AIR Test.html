<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pariksha Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-color: #6D28D9; --primary-light: #EDE9FE; --background-color: #F8FAFC;
            --card-bg: #FFFFFF; --text-dark: #1E293B; --text-light: #64748B;
            --success: #10B981; --danger: #EF4444;
            --gold: #FBBF24; --silver: #9CA3AF; --bronze: #D97706;
        }
        *, *::before, *::after { box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: var(--background-color); margin: 0; color: var(--text-dark); -webkit-font-smoothing: antialiased; }
        .screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: opacity 0.4s ease-in-out;
            overflow-y: auto; padding: 20px;
        }
        .screen.active { opacity: 1; visibility: visible; z-index: 1; }
        .auth-container { width: 100%; max-width: 420px; background-color: var(--card-bg); padding: 2.5rem; border-radius: 24px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); text-align: center; }
        .auth-header { margin-bottom: 2rem; } .auth-header .logo { font-size: 2rem; font-weight: 700; color: var(--primary-color); }
        .auth-header p { color: var(--text-light); } .input-group { position: relative; margin-bottom: 1.5rem; }
        .input-group i { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-light); }
        .form-control { width: 100%; padding: 14px 14px 14px 48px; border: 1px solid #E2E8F0; border-radius: 12px; font-size: 1rem; }
        .form-control:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px var(--primary-light); }
        .btn { width: 100%; padding: 16px; border-radius: 12px; font-size: 1rem; font-weight: 600; border: none; cursor: pointer; transition: transform 0.2s; display: flex; align-items: center; justify-content: center; gap: 0.5rem;}
        .btn-primary { background: linear-gradient(90deg, #8B5CF6, #6D28D9); color: white; }
        .btn-success { background: linear-gradient(90deg, #34D399, #10B981); color: white; }
        .btn-secondary { background: #F1F5F9; color: var(--text-dark); }
        .auth-switch { margin-top: 1.5rem; color: var(--text-light); }
        .auth-switch a { color: var(--primary-color); font-weight: 600; text-decoration: none; cursor: pointer; }
        .auth-footer-links { margin-top: 2rem; font-size: 0.8rem; }
        .auth-footer-links a { color: var(--text-light); text-decoration: none; margin: 0 8px; cursor: pointer;}
        .profile-upload { display: flex; flex-direction: column; align-items: center; margin-bottom: 1.5rem; }
        .profile-pic { width: 80px; height: 80px; border-radius: 50%; background-color: #E2E8F0; background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center; color: var(--text-light); cursor: pointer; }
        #photo-input { display: none; }
        #purchase-screen { justify-content: flex-start; padding: 0; background-color: var(--card-bg);}
        .purchase-header-pro { background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white; padding: 2rem; text-align: center; border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; }
        .purchase-header-pro h2 { margin: 0; font-size: 1.8rem; }
        .live-indicator-wrapper { display: flex; align-items: center; justify-content: center; gap: 0.75rem; }
        .live-indicator { width: 12px; height: 12px; background-color: #EF4444; border-radius: 50%; position: relative; }
        .live-indicator::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; background-color: #EF4444; animation: pulsate-ring 1.5s infinite; }
        @keyframes pulsate-ring { 0% { transform: scale(0.8); opacity: 1; } 100% { transform: scale(2.5); opacity: 0; } }
        .countdown-timer { display: flex; justify-content: center; gap: 1rem; margin-top: 1rem; }
        .timer-box { background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 8px; }
        .timer-box span { display: block; font-size: 1.5rem; font-weight: 700; } .timer-box small { font-size: 0.7rem; opacity: 0.8; }
        .purchase-content { padding: 1.5rem; } .details-section h3 { font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; }
        .detail-item { display: flex; align-items: center; margin-bottom: 1rem; font-size: 1rem; }
        .detail-item i { width: 40px; height: 40px; background-color: var(--primary-light); color: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem; flex-shrink: 0; }
        .purchase-footer { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--card-bg); padding: 1rem 1.5rem; border-top: 1px solid #E2E8F0; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); }
        #instructions-screen .auth-container { text-align: left; } #instructions-screen ul { list-style: none; padding-left: 0; } #instructions-screen li { display: flex; align-items: flex-start; margin-bottom: 1rem; } #instructions-screen li i { color: var(--success); margin-right: 1rem; margin-top: 4px; }
        #ranking-screen { background-color: var(--primary-color); justify-content: flex-start; padding: 0;}
        .ranking-header { color: white; width: 100%; padding: 2.5rem 1.5rem; text-align: center; position: relative; } .ranking-header h1 { margin: 0; font-weight: 700; font-size: 1.8rem; }
        .logout-btn { position: absolute; top: 1.5rem; right: 1.5rem; font-size: 1.5rem; color: white; cursor: pointer; opacity: 0.8; }
        .ranking-body { background-color: var(--background-color); width: 100%; flex-grow: 1; border-top-left-radius: 30px; border-top-right-radius: 30px; padding: 1.5rem; padding-top: 100px; position: relative; }
        .top-rankers { position: absolute; top: -80px; left: 50%; transform: translateX(-50%); display: flex; align-items: flex-end; width: 100%; justify-content: center; gap: 10px; }
        .ranker-card { background: var(--card-bg); border-radius: 16px; padding: 1rem; width: 110px; text-align: center; box-shadow: 0 10px 20px rgba(0,0,0,0.1); position: relative; border: 2px solid transparent; }
        .ranker-card .avatar { width: 60px; height: 60px; border-radius: 50%; margin: 0 auto; margin-top: 20px; border: 3px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); background-size: cover; background-position: center; }
        .ranker-card.rank-1 { border-color: var(--gold); transform: translateY(-20px); }
        .ranker-card.rank-2 { border-color: var(--silver); } .ranker-card.rank-3 { border-color: var(--bronze); }
        .medal { position: absolute; top: 0; left: 50%; transform: translate(-50%, -50%); font-size: 1.8rem; }
        .ranker-card .name { font-weight: 600; margin-top: 0.5rem; font-size: 0.9rem; }
        .ranker-card .score { font-size: 1.1rem; font-weight: 700; color: var(--primary-color); }
        .ranking-list .list-item { display: flex; align-items: center; background-color: var(--card-bg); padding: 1rem; border-radius: 12px; margin-bottom: 12px; }
        .ranking-list .list-item.my-rank { background-color: var(--primary-light); border: 1px solid var(--primary-color); }
        .list-item .rank { font-weight: 700; font-size: 1rem; width: 40px; text-align: center; color: var(--text-light); }
        .list-item .avatar { width: 40px; height: 40px; border-radius: 50%; margin-right: 1rem; background-size: cover; background-position: center;}
        .list-item .name { font-weight: 600; flex: 1; } .list-item .score { font-weight: 700; color: var(--primary-color); }
        .text-page { background-color: var(--card-bg); justify-content: flex-start; }
        .text-page-header { background-color: #fff; width: 100%; padding: 1rem 1.5rem; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; align-items: center; flex-shrink: 0; }
        .back-btn { background: none; border: none; font-size: 1.2rem; cursor: pointer; margin-right: 1rem; }
        .text-page-content { padding: 1.5rem; color: var(--text-light); }
        #toast-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; z-index: 100; pointer-events: none; opacity: 0; transition: opacity 0.3s; background: rgba(0,0,0,0.4); }
        #toast-container.show { opacity: 1; pointer-events: all; }
        .toast { background-color: var(--card-bg); color: var(--text-dark); padding: 1.5rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center; transform: scale(0.8); transition: transform 0.3s; }
        #toast-container.show .toast { transform: scale(1); }
        .toast i { font-size: 2rem; margin-bottom: 1rem; }
        .toast.success i { color: var(--success); } .toast.error i { color: var(--danger); }
        .toast-message { font-weight: 500; }
        .demo-test-header { display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 1rem; }
        .demo-timer { font-weight: 600; color: var(--danger); }
        .lang-toggle { background-color: #E2E8F0; border-radius: 20px; display: flex; position: relative; padding: 4px; }
        .lang-btn { background: none; border: none; padding: 6px 16px; cursor: pointer; font-weight: 600; color: var(--text-light); position: relative; z-index: 1; transition: color 0.3s; }
        .lang-btn.active { color: var(--primary-color); }
        .lang-toggle .glider { position: absolute; top: 4px; height: calc(100% - 8px); width: 50%; background-color: var(--card-bg); border-radius: 16px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: transform 0.3s ease-in-out; }
        #demo-test-screen .auth-container { max-width: 500px; }
        .question-box { text-align: left; }
        .option { display: flex; align-items: center; padding: 14px; border: 1px solid #E2E8F0; border-radius: 12px; margin-bottom: 10px; cursor: pointer; transition: border-color 0.2s, background-color 0.2s; }
        .option::before { content: '\f111'; font-family: 'Font Awesome 6 Free'; font-weight: 400; color: #CBD5E1; margin-right: 12px; }
        .option.selected { border-color: var(--primary-color); background-color: var(--primary-light); }
        .option.selected::before { content: '\f058'; font-weight: 900; color: var(--primary-color); }
        .demo-nav { display: flex; justify-content: space-between; margin-top: 2rem; }
    </style>
</head>
<body>

    <div id="toast-container"><div class="toast"><i id="toast-icon"></i><div id="toast-message"></div></div></div>
    
    <!-- AUTH SCREENS -->
    <div id="login-screen" class="screen"><div class="auth-container"><div class="auth-header"><div class="logo">Pariksha Pro</div><p>अपने मॉक टेस्ट की यात्रा शुरू करें</p></div><form id="login-form"><div class="input-group"><i class="fas fa-user"></i><input type="text" id="login-identifier" class="form-control" placeholder="यूजरनेम या मोबाइल नंबर" required></div><div class="input-group"><i class="fas fa-lock"></i><input type="password" id="login-password" class="form-control" placeholder="पासवर्ड" required></div><button type="submit" class="btn btn-primary">लॉगिन</button></form><div class="auth-switch">खाता नहीं है? <a id="show-signup">साइन-अप करें</a></div><div class="auth-footer-links"><a data-target="privacy-screen">Privacy Policy</a> &bull; <a data-target="support-screen">Support</a></div></div></div>
    <div id="signup-screen" class="screen"><div class="auth-container"><div class="auth-header"><div class="logo">नया खाता बनाएं</div><p>शुरू करने के लिए अपनी जानकारी दर्ज करें</p></div><form id="signup-form"><div class="profile-upload"><label for="photo-input"><div class="profile-pic" id="profile-pic-preview"><i class="fas fa-camera"></i></div></label><input type="file" id="photo-input" accept="image/*"></div><div class="input-group"><i class="fas fa-user"></i><input type="text" id="signup-username" class="form-control" placeholder="यूजरनेम चुनें" required></div><div class="input-group"><i class="fas fa-mobile-alt"></i><input type="tel" id="signup-mobile" class="form-control" placeholder="मोबाइल नंबर" required></div><div class="input-group"><i class="fas fa-lock"></i><input type="password" id="signup-password" class="form-control" placeholder="एक पासवर्ड बनाएं" required></div><button type="submit" class="btn btn-primary">साइन-अप</button></form><div class="auth-switch">पहले से खाता है? <a id="show-login">लॉगिन करें</a></div><div class="auth-footer-links"><a data-target="privacy-screen">Privacy Policy</a> &bull; <a data-target="support-screen">Support</a></div></div></div>
    
    <!-- PURCHASE SCREEN -->
    <div id="purchase-screen" class="screen"><div class="purchase-header-pro"><div class="live-indicator-wrapper"><div class="live-indicator"></div><p>All India Live Test</p></div><h2>UP Police Mock Test</h2><div class="countdown-timer"><div class="timer-box"><span id="days">00</span><small>Days</small></div><div class="timer-box"><span id="hours">00</span><small>Hours</small></div><div class="timer-box"><span id="minutes">00</span><small>Mins</small></div><div class="timer-box"><span id="seconds">00</span><small>Secs</small></div></div></div><div class="purchase-content"><div class="details-section"><h3>टेस्ट की मुख्य विशेषताएं</h3><div class="detail-item"><i class="fas fa-book-open"></i><div><strong>विषय</strong><br><span class="text-muted">सामान्य ज्ञान, हिंदी, गणित, रीजनिंग</span></div></div><div class="detail-item"><i class="fas fa-question-circle"></i><div><strong>कुल प्रश्न</strong><br><span class="text-muted">150 प्रश्न</span></div></div><div class="detail-item"><i class="fas fa-clock"></i><div><strong>समय</strong><br><span class="text-muted">120 मिनट</span></div></div><div class="detail-item"><i class="fas fa-language"></i><div><strong>भाषा</strong><br><span class="text-muted">हिंदी और अंग्रेजी</span></div></div></div></div><div class="purchase-footer"><button class="btn btn-success" id="buy-button"><i class="fas fa-lock"></i><span>₹49 में खरीदें</span></button><button class="btn btn-secondary" id="demo-test-button">फ्री डेमो टेस्ट दें</button></div></div>
    
    <!-- DEMO TEST SCREEN -->
    <div id="demo-test-screen" class="screen"><div class="auth-container"><div class="demo-test-header"><div class="demo-timer" id="demo-timer">समय शेष: 05:00</div><div class="lang-toggle"><div class="glider"></div><button class="lang-btn active" data-lang="hi">हिंदी</button><button class="lang-btn" data-lang="en">English</button></div></div><h3 id="demo-question-number">प्रश्न 1/5</h3><hr><div class="question-box"><h5 id="demo-question-text">प्रश्न यहाँ आएगा</h5><div id="demo-options-container"></div></div><div class="demo-nav"><button id="demo-prev-btn" class="btn btn-secondary">पिछला</button><button id="demo-next-btn" class="btn btn-primary">अगला</button></div></div></div>

    <!-- INSTRUCTIONS SCREEN -->
    <div id="instructions-screen" class="screen"><div class="auth-container"><h3>टेस्ट के निर्देश</h3><p class="text-muted">कृपया शुरू करने से पहले निर्देशों को ध्यान से पढ़ें।</p><ul><li><i class="fas fa-check-circle"></i><div><strong>कुल समय:</strong> 120 मिनट</div></li><li><i class="fas fa-check-circle"></i><div><strong>कुल प्रश्न:</strong> 150</div></li><li><i class="fas fa-check-circle"></i><div><strong>अंकन:</strong> प्रत्येक सही उत्तर के लिए +2 अंक।</div></li><li><i class="fas fa-check-circle"></i><div><strong>नेगेटिव मार्किंग:</strong> प्रत्येक गलत उत्तर के लिए -0.5 अंक।</div></li></ul><button class="btn btn-primary" id="start-test-button">टेस्ट शुरू करें</button></div></div>
    
    <!-- RANKING SCREEN -->
    <div id="ranking-screen" class="screen"><div class="ranking-header"><i class="fas fa-sign-out-alt logout-btn"></i><h1>लीडरबोर्ड</h1><p>UP Police All India Mock</p></div><div class="ranking-body"><div class="top-rankers" id="top-rankers-container"></div><div class="ranking-list" id="ranking-list-container"></div></div></div>
    
    <!-- TEXT PAGES -->
    <div id="privacy-screen" class="screen text-page"><header class="text-page-header"><button class="back-btn"><i class="fas fa-arrow-left"></i></button><h2>Privacy Policy</h2></header><div class="text-page-content"><p>This is a dummy privacy policy page...</p></div></div>
    <div id="support-screen" class="screen text-page"><header class="text-page-header"><button class="back-btn"><i class="fas fa-arrow-left"></i></button><h2>Support</h2></header><div class="text-page-content"><p>For any help, contact us at support@parikshapro.com</p></div></div>

    <script>
        const SESSION_KEY = 'pariksha_pro_active_session';
        const db = { findUser: (id) => { const users = JSON.parse(localStorage.getItem('pariksha_pro_users') || '{}'); return users[id] || Object.values(users).find(u => u.mobile === id); }, saveUser: (user) => { const allUsers = JSON.parse(localStorage.getItem('pariksha_pro_users') || '{}'); allUsers[user.username] = user; localStorage.setItem('pariksha_pro_users', JSON.stringify(allUsers)); } };
        let currentUser = null, previousScreen = 'login-screen', demoTimerInterval = null, currentLanguage = 'hi';
        
        const toastContainer = document.getElementById('toast-container');
        const showToast = (message, type = 'success') => { document.getElementById('toast-icon').className = type === 'success' ? 'fas fa-check-circle' : 'fas fa-times-circle'; document.getElementById('toast-message').textContent = message; toastContainer.querySelector('.toast').className = `toast ${type}`; toastContainer.classList.add('show'); setTimeout(() => toastContainer.classList.remove('show'), 2500); };
        const showScreen = (screenId, fromScreen) => { if (fromScreen) previousScreen = fromScreen; document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); document.getElementById(screenId).classList.add('active'); };
        const handleAuthentication = (user) => { currentUser = user; localStorage.setItem(SESSION_KEY, user.username); showToast(`लॉगिन सफल, ${user.username}!`); if (user.hasAttempted) { renderRanking(); showScreen('ranking-screen'); } else if (user.hasPurchased) { showScreen('instructions-screen'); } else { showScreen('purchase-screen'); } };
        const renderRanking = () => {
            const topRankersContainer = document.getElementById('top-rankers-container'); const listContainer = document.getElementById('ranking-list-container'); topRankersContainer.innerHTML = ''; listContainer.innerHTML = ''; const myAvatar = currentUser.avatar || 'https://i.pravatar.cc/150?u=' + currentUser.username;
            const rankings = [ { rank: 1, name: 'अंजलि शर्मा', score: 272, avatar: 'https://i.pravatar.cc/150?u=anjali' }, { rank: 2, name: 'विकास सिंह', score: 265, avatar: 'https://i.pravatar.cc/150?u=vikas' }, { rank: 3, name: 'राहुल कुमार', score: 260, avatar: 'https://i.pravatar.cc/150?u=rahul' }, { rank: 4, name: 'प्रीति वर्मा', score: 258, avatar: 'https://i.pravatar.cc/150?u=priti' }, { rank: 5, name: 'रोहित यादव', score: 255, avatar: 'https://i.pravatar.cc/150?u=rohit' }, { rank: 6, name: currentUser.username, score: 252, avatar: myAvatar }, { rank: 7, name: 'सोनम तिवारी', score: 250, avatar: 'https://i.pravatar.cc/150?u=sonam' }, ];
            const top3 = rankings.slice(0, 3); const others = rankings.slice(3); const displayOrder = [top3.find(r=>r.rank===2), top3.find(r=>r.rank===1), top3.find(r=>r.rank===3)];
            displayOrder.forEach(item => { if(!item) return; let medalColor = item.rank === 1 ? 'gold' : (item.rank === 2 ? 'silver' : 'bronze'); topRankersContainer.innerHTML += `<div class="ranker-card rank-${item.rank}"><i class="fas fa-medal medal" style="color: var(--${medalColor});"></i><div class="avatar" style="background-image: url('${item.avatar}')"></div><div class="name">${item.name}</div><div class="score">${item.score}</div></div>`; });
            others.forEach(item => { const isMyRank = item.name === currentUser.username; listContainer.innerHTML += `<div class="list-item ${isMyRank ? 'my-rank' : ''}"><div class="rank">#${item.rank}</div><div class="avatar" style="background-image: url('${item.avatar}')"></div><div class="name">${item.name}</div><div class="score">${item.score}</div></div>`; });
        };
        const startCountdown = () => {
             const countdownDate = new Date().getTime() + 2 * 24 * 60 * 60 * 1000; setInterval(() => { const now = new Date().getTime(); const d = countdownDate - now; document.getElementById('days').innerText = Math.floor(d / (864e5)).toString().padStart(2, '0'); document.getElementById('hours').innerText = Math.floor((d % (864e5)) / (36e5)).toString().padStart(2, '0'); document.getElementById('minutes').innerText = Math.floor((d % (36e5)) / (6e4)).toString().padStart(2, '0'); document.getElementById('seconds').innerText = Math.floor((d % (6e4)) / 1000).toString().padStart(2, '0'); }, 1000);
        };

        const demoQuestions = [
            { text: { hi: "भारत की राजधानी क्या है?", en: "What is the capital of India?" }, options: [{ hi: "मुंबई", en: "Mumbai" }, { hi: "दिल्ली", en: "Delhi" }, { hi: "कोलकाता", en: "Kolkata" }, { hi: "चेन्नई", en: "Chennai" }] },
            { text: { hi: "उत्तर प्रदेश के मुख्यमंत्री कौन हैं?", en: "Who is the Chief Minister of Uttar Pradesh?" }, options: [{ hi: "अखिलेश यादव", en: "Akhilesh Yadav" }, { hi: "मायावती", en: "Mayawati" }, { hi: "योगी आदित्यनाथ", en: "Yogi Adityanath" }, { hi: "अरविंद केजरीवाल", en: "Arvind Kejriwal" }] },
            { text: { hi: "15 का वर्ग क्या है?", en: "What is the square of 15?" }, options: [{ hi: "225", en: "225" }, { hi: "125", en: "125" }, { hi: "250", en: "250" }, { hi: "300", en: "300" }] },
            { text: { hi: "इनमें से कौन एक स्वर (vowel) नहीं है?", en: "Which of the following is not a vowel?" }, options: [{ hi: "A", en: "A" }, { hi: "E", en: "E" }, { hi: "I", en: "I" }, { hi: "B", en: "B" }] },
            { text: { hi: "ताजमहल किस शहर में है?", en: "In which city is the Taj Mahal located?" }, options: [{ hi: "दिल्ली", en: "Delhi" }, { hi: "मुंबई", en: "Mumbai" }, { hi: "आगरा", en: "Agra" }, { hi: "जयपुर", en: "Jaipur" }] }
        ];
        let currentDemoQ = 0, demoAnswers = new Array(demoQuestions.length).fill(null);
        const startDemoTimer = () => { let time = 300; clearInterval(demoTimerInterval); demoTimerInterval = setInterval(() => { time--; let mins = Math.floor(time / 60).toString().padStart(2,'0'); let secs = (time % 60).toString().padStart(2,'0'); document.getElementById('demo-timer').textContent = `समय शेष: ${mins}:${secs}`; if (time <= 0) { clearInterval(demoTimerInterval); showToast("समय समाप्त!", "error"); showScreen('purchase-screen'); } }, 1000); };
        const renderDemoQuestion = () => {
            const questionData = demoQuestions[currentDemoQ];
            document.getElementById('demo-question-number').textContent = `प्रश्न ${currentDemoQ + 1}/${demoQuestions.length}`;
            document.getElementById('demo-question-text').textContent = questionData.text[currentLanguage];
            const optionsContainer = document.getElementById('demo-options-container'); optionsContainer.innerHTML = '';
            questionData.options.forEach((opt, index) => { const optionEl = document.createElement('div'); optionEl.className = 'option'; optionEl.textContent = opt[currentLanguage]; if (demoAnswers[currentDemoQ] === index) optionEl.classList.add('selected'); optionEl.onclick = () => { demoAnswers[currentDemoQ] = index; renderDemoQuestion(); }; optionsContainer.appendChild(optionEl); });
        };
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                currentLanguage = btn.dataset.lang;
                document.querySelector('.lang-toggle .glider').style.transform = `translateX(${btn.offsetLeft - 4}px)`;
                document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderDemoQuestion();
            });
        });
        document.getElementById('demo-test-button').addEventListener('click', () => { currentDemoQ = 0; demoAnswers.fill(null); renderDemoQuestion(); startDemoTimer(); showScreen('demo-test-screen', 'purchase-screen'); });
        document.getElementById('demo-next-btn').addEventListener('click', () => { if (currentDemoQ < demoQuestions.length - 1) { currentDemoQ++; renderDemoQuestion(); } else { clearInterval(demoTimerInterval); showToast("डेमो टेस्ट समाप्त!"); showScreen('purchase-screen'); } });
        document.getElementById('demo-prev-btn').addEventListener('click', () => { if (currentDemoQ > 0) { currentDemoQ--; renderDemoQuestion(); } });
        document.getElementById('show-signup').addEventListener('click', (e) => { e.preventDefault(); showScreen('signup-screen', 'login-screen'); });
        document.getElementById('show-login').addEventListener('click', (e) => { e.preventDefault(); showScreen('login-screen', 'signup-screen'); });
        document.querySelectorAll('.auth-footer-links a').forEach(el => el.addEventListener('click', (e) => { const from = document.querySelector('.screen.active').id; showScreen(e.target.dataset.target, from); }));
        document.querySelectorAll('.back-btn').forEach(el => el.addEventListener('click', () => showScreen(previousScreen)));
        document.getElementById('photo-input').addEventListener('change', (e) => { const file = e.target.files[0]; if (file) { const reader = new FileReader(); reader.onload = (event) => { document.getElementById('profile-pic-preview').style.backgroundImage = `url('${event.target.result}')`; document.getElementById('profile-pic-preview').innerHTML=''; }; reader.readAsDataURL(file); } });
        document.getElementById('login-form').addEventListener('submit', (e) => { e.preventDefault(); const identifier = document.getElementById('login-identifier').value.trim(); const password = document.getElementById('login-password').value; const user = db.findUser(identifier); if (user && user.password === password) { handleAuthentication(user); } else { showToast("यूजरनेम/मोबाइल या पासवर्ड गलत है.", "error"); } });
        document.getElementById('signup-form').addEventListener('submit', (e) => { e.preventDefault(); const username = document.getElementById('signup-username').value.trim(); const mobile = document.getElementById('signup-mobile').value.trim(); const password = document.getElementById('signup-password').value; const avatar = document.getElementById('profile-pic-preview').style.backgroundImage.slice(5, -2); if (!username || !mobile || !password) { showToast("सभी जानकारी भरना अनिवार्य है", "error"); return; } if (db.findUser(username) || db.findUser(mobile)) { showToast("यह यूजरनेम या मोबाइल पहले से मौजूद है.", "error"); return; } const newUser = { username, mobile, password, avatar, hasPurchased: false, hasAttempted: false }; db.saveUser(newUser); showToast("साइन-अप सफल!", "success"); handleAuthentication(newUser); });
        document.getElementById('buy-button').addEventListener('click', () => { currentUser.hasPurchased = true; db.saveUser(currentUser); showToast("सफलतापूर्वक खरीद लिया गया!", "success"); showScreen('instructions-screen'); });
        document.getElementById('start-test-button').addEventListener('click', () => { currentUser.hasAttempted = true; db.saveUser(currentUser); renderRanking(); showScreen('ranking-screen'); });
        document.querySelector('.logout-btn').addEventListener('click', () => { localStorage.removeItem(SESSION_KEY); currentUser = null; showToast("आप सफलतापूर्वक लॉगआउट हो गए हैं।"); showScreen('login-screen'); });
        
        document.addEventListener('DOMContentLoaded', () => {
            const activeUser = localStorage.getItem(SESSION_KEY);
            if(activeUser) {
                const user = db.findUser(activeUser);
                if(user) handleAuthentication(user);
                else showScreen('login-screen');
            } else {
                showScreen('login-screen');
            }
            startCountdown();
        });

        // Anti-Cheating Features
        const demoTestScreen = document.getElementById('demo-test-screen');
        const handleVisibilityChange = () => { if (demoTestScreen.classList.contains('active') && document.hidden) { clearInterval(demoTimerInterval); showToast("नकल का प्रयास! टेस्ट सबमिट हो गया.", "error"); showScreen('purchase-screen'); } };
        demoTestScreen.addEventListener('contextmenu', e => e.preventDefault());
        demoTestScreen.addEventListener('copy', e => e.preventDefault());
        demoTestScreen.addEventListener('paste', e => e.preventDefault());
        demoTestScreen.addEventListener('cut', e => e.preventDefault());
        document.addEventListener('visibilitychange', handleVisibilityChange);
    </script>
</body>
</html>