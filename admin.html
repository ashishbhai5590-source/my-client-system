<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>‡§è‡§°‡§Æ‡§ø‡§® - ‡§ë‡§∞‡•ç‡§°‡§∞‡•ç‡§∏</title>
    <style>body{font-family:-apple-system,sans-serif;padding:10px;background:#f4f4f4} h1,h3{text-align:center} .container{background:white;padding:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,.1);max-width:1200px;margin:auto} .table-container{overflow-x:auto} table{width:100%;border-collapse:collapse} th,td{border:1px solid #ddd;padding:10px;text-align:left;vertical-align:top} th{background-color:#f2f2f2} .tracking-form input{width:100%;max-width:150px;margin-bottom:5px;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box} .tracking-form button{width:100%;max-width:150px;background:#28a745;color:#fff;border:none;padding:8px;border-radius:4px;cursor:pointer}</style>
</head>
<body>
    <h1>üìã ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§ï‡•á ‡§ë‡§∞‡•ç‡§°‡§∞‡•ç‡§∏</h1>
    <div class="container">
        <h3 id="product-name-header">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</h3>
        <div class="table-container"><table id="orders-table"><thead><tr><th>‡§ó‡•ç‡§∞‡§æ‡§π‡§ï</th><th>‡§™‡§§‡§æ</th><th>‡§´‡•ã‡§®</th><th>‡§ü‡§æ‡§á‡§™</th><th>‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó</th></tr></thead><tbody></tbody></table></div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
    <script>
  const firebaseConfig = {
    apiKey: "AIzaSyCZAoe1zoWGZk7A1WLFxdR4T67ntvmFIfY",
    authDomain: "my-client-stores.firebaseapp.com",
    databaseURL: "https://my-client-stores-default-rtdb.firebaseio.com",
    projectId: "my-client-stores",
    storageBucket: "my-client-stores.firebasestorage.app",
    messagingSenderId: "658459339073",
    appId: "1:658459339073:web:37fa1b05e06c09c14119c0",
    measurementId: "G-N8MVEE3B19"
  };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const params = new URLSearchParams(window.location.search);
        const clientId = params.get('clientId'); const productId = params.get('productId');
        if(clientId&&productId){database.ref(`products/${clientId}/${productId}/name`).once('value',(s)=>{if(s.exists()){document.getElementById('product-name-header').innerText=`‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü: ${s.val()}`}else{document.getElementById('product-name-header').innerText='‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ'}});
        const ordersRef=database.ref(`orders/${clientId}/${productId}`);ordersRef.on('value',(snapshot)=>{const tbody=document.querySelector('#orders-table tbody');tbody.innerHTML='';if(!snapshot.exists()){tbody.innerHTML='<tr><td colspan="5" style="text-align:center;">‡§Ö‡§≠‡•Ä ‡§ï‡•ã‡§à ‡§®‡§Ø‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§</td></tr>';return}
        snapshot.forEach((childSnapshot)=>{const order=childSnapshot.val();const row=`<tr><td>${order.customer_name}</td><td>${order.customer_address}</td><td>${order.customer_phone}</td><td>${order.type} ${order.paymentId?'(Paid)':''}</td><td><form class="tracking-form" onsubmit="addTracking(event, '${order.customer_phone}')"><input type="text" placeholder="‡§ï‡•Ç‡§∞‡§ø‡§Ø‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ" required><input type="text" placeholder="‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ID" required><button type="submit">‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button></form></td></tr>`;tbody.innerHTML+=row})})}else{document.getElementById('product-name-header').innerText='‡§ó‡§≤‡§§ ‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡§ø‡§Ç‡§ï‡•§'}
        function addTracking(event,phone){event.preventDefault();const courier=event.target.children[0].value;const trackingId=event.target.children[1].value;database.ref(`tracking/${phone}`).update({status:'Shipped',courier,trackingId});alert(`‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§°‡§ø‡§ü‡•á‡§≤‡•ç‡§∏ ‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞ ${phone} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã ‡§ó‡§à ‡§π‡•à‡§Ç!`);event.target.reset()}
    </script>
</body>
</html>