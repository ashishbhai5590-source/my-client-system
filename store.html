<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡•ç‡§ü‡•ã‡§∞</title>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>/* Final CSS */ body{font-family:-apple-system,sans-serif;margin:0;background-color:#e9ebee} .announcement-bar{background:#333;color:#fff;text-align:center;padding:10px;font-size:14px;font-weight:700} .container{background:#fff;margin:10px;border-radius:15px;box-shadow:0 4px 12px rgba(0,0,0,.1);overflow:hidden} .swiper-container{width:100%;height:350px} .swiper-slide img{width:100%;height:100%;object-fit:cover} .swiper-pagination-bullet-active{background:#007bff!important} .product-details{padding:20px} .product-title{font-size:24px;font-weight:700} .price{font-size:28px;color:#28a745;font-weight:700} .old-price{text-decoration:line-through;color:#999;margin-left:10px} .order-box{background:#f4f7f6;padding:20px;border-radius:10px} input{width:100%;padding:14px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:16px;margin-bottom:15px} .button{display:block;width:100%;padding:15px;border:none;border-radius:8px;color:#fff;font-size:18px;font-weight:700;cursor:pointer} .cod-button{background-color:#007bff;margin-bottom:10px} .online-button{background-color:#28a745} .or-divider{text-align:center;margin:15px 0;font-weight:700;color:#888} .footer-links{text-align:center;padding:20px;font-size:14px} .footer-links a{color:#007bff;text-decoration:none;margin:0 10px} .loader{text-align:center;padding:50px;font-size:20px} .modal{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.5)} .modal-content{background-color:#fefefe;margin:15% auto;padding:25px;border-radius:10px;width:90%;max-width:600px;white-space:pre-wrap;line-height:1.6} .close-btn{color:#aaa;float:right;font-size:28px;font-weight:700;cursor:pointer}</style>
</head>
<body>
    <div id="loading" class="loader">‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</div><div id="content" style="display:none;">
    <div id="announcement-bar" class="announcement-bar"></div><div class="container"><div class="swiper-container"><div class="swiper-wrapper" id="image-slider"></div><div class="swiper-pagination"></div></div><div class="product-details">
    <h1 class="product-title" id="product-name"></h1><p id="product-reviews"></p><p><span class="price" id="current-price"></span> <span class="old-price" id="old-price"></span></p>
    <div id="features-list" style="margin:20px 0"></div><div class="order-box"><form id="codForm">
    <input type="text" id="name" placeholder="üë§ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ" required><input type="text" id="address" placeholder="üè† ‡§Ö‡§™‡§®‡§æ ‡§™‡§§‡§æ" required><input type="tel" id="phone" placeholder="üì± ‡§Ö‡§™‡§®‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" required>
    <button type="submit" class="button cod-button">üõí ‡§Ö‡§≠‡•Ä ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç (COD)</button></form>
    <!-- ‡§Ø‡§π ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§Ö‡§¨ ‡§°‡§æ‡§Ø‡§®‡§æ‡§Æ‡§ø‡§ï ‡§π‡•à -->
    <div id="online-payment-section">
        <div class="or-divider">‡§Ø‡§æ</div>
        <button class="button online-button" id="online-pay-btn">üí≥ ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
    </div>
    </div><div class="footer-links" id="footer-links"></div></div></div></div>
    <div id="policyModal" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal()">&times;</span><h2 id="policy-title"></h2><p id="policy-text"></p></div></div>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script><script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script><script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        const firebaseConfig = {
    apiKey: "AIzaSyCZAoe1zoWGZk7A1WLFxdR4T67ntvmFIfY",
    authDomain: "my-client-stores.firebaseapp.com",
    databaseURL: "https://my-client-stores-default-rtdb.firebaseio.com",
    projectId: "my-client-stores",
    storageBucket: "my-client-stores.firebasestorage.app",
    messagingSenderId: "658459339073",
    appId: "1:658459339073:web:37fa1b05e06c09c14119c0",
    measurementId: "G-N8MVEE3B19"
  };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const params = new URLSearchParams(window.location.search);
        const clientId = params.get('clientId'); const productId = params.get('productId');
        let productData;
        if(clientId&&productId){database.ref('clients/'+clientId).once('value',clientSnapshot=>{const client=clientSnapshot.val();if(!client||client.status==='blocked'){document.getElementById('loading').innerText='‡§Ø‡§π ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§Ö‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡§Ç‡§¶ ‡§π‡•à‡•§';return}
        database.ref(`products/${clientId}/${productId}`).once('value').then((snapshot)=>{if(!snapshot.exists()){document.getElementById('loading').innerText='‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§';return}
        productData=snapshot.val();if(productData.expiryDate&&new Date(productData.expiryDate)<new Date()){document.getElementById('loading').innerText='‡§Ø‡§π ‡§ë‡§´‡§∞ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ö‡•Å‡§ï‡§æ ‡§π‡•à‡•§';return}
        document.title=productData.name;document.getElementById('product-name').innerText=productData.name;document.getElementById('product-reviews').innerText=productData.reviewText;document.getElementById('current-price').innerText=`üí∞ ‚Çπ${productData.price}`;document.getElementById('old-price').innerText=`‚Çπ${productData.oldPrice}`;document.getElementById('image-slider').innerHTML=productData.images.map(url=>`<div class="swiper-slide"><img src="${url}"></div>`).join('');document.getElementById('features-list').innerHTML=productData.features.map(f=>`<p>‚úÖ ${f}</p>`).join('');document.getElementById('announcement-bar').innerText=productData.freeDelivery?'üöö ‡§Ü‡§ú ‡§∏‡§≠‡•Ä ‡§ë‡§∞‡•ç‡§°‡§∞‡•ç‡§∏ ‡§™‡§∞ ‡§∂‡§ø‡§™‡§ø‡§Ç‡§ó ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§Æ‡•Å‡§´‡§º‡•ç‡§§!':'‡§è‡§ï ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§∏‡•ç‡§ü‡•ã‡§∞';
        const footer=document.getElementById('footer-links');if(productData.privacyPolicy)footer.innerHTML+=`<a href="#" onclick="showPolicy('Privacy Policy','privacyPolicy')">Privacy Policy</a>`;if(productData.refundPolicy)footer.innerHTML+=`<a href="#" onclick="showPolicy('Refund Policy','refundPolicy')">Refund Policy</a>`;if(productData.aboutUs)footer.innerHTML+=`<a href="#" onclick="showPolicy('About Us','aboutUs')">About Us</a>`;if(productData.contactUs)footer.innerHTML+=`<a href="#" onclick="showPolicy('Contact Us','contactUs')">Contact Us</a>`;
        new Swiper('.swiper-container',{loop:true,pagination:{el:'.swiper-pagination',clickable:true}});

        // ‚ñº‚ñº‚ñº ‡§Ø‡§π‡§æ‡§Å ‡§®‡§Ø‡§æ ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§π‡•à ‚ñº‚ñº‚ñº
        if (client.razorpayKeyId === 'COD') {
            // ‡§Ö‡§ó‡§∞ ‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü ‡§∏‡§ø‡§∞‡•ç‡§´ COD ‡§ö‡§æ‡§π‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§æ ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§õ‡§ø‡§™‡§æ ‡§¶‡•á‡§Ç
            document.getElementById('online-payment-section').style.display = 'none';
        } else {
            // ‡§µ‡§∞‡§®‡§æ, Razorpay ‡§ö‡§æ‡§≤‡•Ç ‡§ï‡§∞‡•á‡§Ç
            const rzp = new Razorpay({ key: client.razorpayKeyId, amount: productData.price * 100, currency: "INR", name: productData.name, handler: (res)=>{const phone = prompt("‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§∏‡§´‡§≤! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§ï‡§∞‡•á‡§Ç:", ""); if(phone)saveOrder(phone,'Online Paid',res.razorpay_payment_id);}});
            document.getElementById('online-pay-btn').onclick=(e)=>{rzp.open();e.preventDefault()};
        }
        // ‚ñ≤‚ñ≤‚ñ≤ ‡§Ø‡§π‡§æ‡§Å ‡§§‡§ï ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§π‡•à ‚ñ≤‚ñ≤‚ñ≤

        document.getElementById('loading').style.display='none'; document.getElementById('content').style.display='block';
        })})}else{document.getElementById('loading').innerText='‡§ó‡§≤‡§§ ‡§≤‡§ø‡§Ç‡§ï‡•§'}
        document.getElementById('codForm').addEventListener('submit',(e)=>{e.preventDefault();saveOrder(document.getElementById('phone').value,'COD')});
        function saveOrder(phone,type,paymentId=null){const orderData={customer_name:document.getElementById('name').value,customer_address:document.getElementById('address').value,customer_phone:phone,type:type,paymentId:paymentId};database.ref(`orders/${clientId}/${productId}/${Date.now()}`).set(orderData);database.ref(`tracking/${phone}`).set({status:'Processing'});alert('üéâ ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™‡§ï‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•ç‡§≤‡•á‡§∏ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§');if(type==='COD')document.getElementById('codForm').reset()}
        function showPolicy(title,key){document.getElementById('policy-title').innerText=title;document.getElementById('policy-text').innerText=productData[key];document.getElementById('policyModal').style.display='block'}
        function closeModal(){document.getElementById('policyModal').style.display='none'}
    </script>
</body>
</html>